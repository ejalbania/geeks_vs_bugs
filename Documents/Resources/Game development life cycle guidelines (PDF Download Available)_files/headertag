function splitIndexSlots(){for(var e=new Array,t=new Array,n=0;n<index_slots.length;n++){var a=index_slots[n].split("_"),i=a.shift(),o=i,d=a.join("_");o==OPEN_MARKET?e.push(d):o==PRIVATE_MARKET&&t.push(d)}return[e,t]}function isSameSlot(e,t){return e=e.split("_"),t=t.split("_"),e.pop()==t.pop()&&e.pop()==t.pop()}function clearTargeting(e){for(var t=[],n=[],a=[],i=splitIndexSlots(),o=i[0],d=i[1],s=0;s<o.length;s++)isSameSlot(o[s],e)||(t.push(o[s]),a.push(OPEN_MARKET+"_"+o[s]));for(var s=0;s<d.length;s++)isSameSlot(d[s],e)||(n.push(d[s]),a.push(PRIVATE_MARKET+"_"+d[s]));index_slots=a,o=t,d=n,googletag&&googletag.pubads&&googletag.pubads().setTargeting&&(o.length>0?googletag.pubads().setTargeting(OPEN_MARKET,o):googletag.pubads().setTargeting(OPEN_MARKET,[]),d.length>0?googletag.pubads().setTargeting(PRIVATE_MARKET,d):googletag.pubads().setTargeting(PRIVATE_MARKET,[]))}function cygnus_index_judge(e){for(var t={},n="^(?:"+OPEN_MARKET+"|"+PRIVATE_MARKET+")_(?:T([0-9])_)?(.*)_.*$",a=new RegExp(n),i=[],o=0;o<e.length;o++)if(e[o].split("_")[0]!==PRIVATE_MARKET){var d=a.exec(e[o]);if("undefined"!=typeof d&&null!==d){var s,g;if(s=d[1],g=d[2],("undefined"==typeof s||null===s)&&(s=0),t[g]=t[g]||{},"undefined"==typeof t[g].tier||t[g].tier<s){t[g].tier=s;var r=e[o];if(s>0){var _=e[o].split("_"),l=_.shift(),u=_.join("_");_.shift();var p=_.join("_");r=l+"_"+p,_IndexRequestData.targetIDToBid[p]=_IndexRequestData.targetIDToBid[u]}t[g].target=r}}}else i.push(e[o]);var f=[];for(var x in t)t.hasOwnProperty(x)!==!1&&f.push(t[x].target);return f.concat(i)}function cygnus_index_parse_res(e){try{if(e){if("object"!=typeof _IndexRequestData||"object"!=typeof _IndexRequestData.impIDToSlotID||"undefined"==typeof _IndexRequestData.impIDToSlotID[e.id])return;var t,n=0;"object"==typeof _IndexRequestData.reqOptions&&"object"==typeof _IndexRequestData.reqOptions[e.id]&&("function"==typeof _IndexRequestData.reqOptions[e.id].callback&&(t=_IndexRequestData.reqOptions[e.id].callback),"number"==typeof _IndexRequestData.reqOptions[e.id].targetMode&&(n=_IndexRequestData.reqOptions[e.id].targetMode)),_IndexRequestData.lastRequestID=e.id;for(var a=[],i="undefined"==typeof e.seatbid?0:e.seatbid.length,o=0;i>o;o++)for(var d=0;d<e.seatbid[o].bid.length;d++){var s=e.seatbid[o].bid[d];if("object"==typeof s.ext&&"string"==typeof s.ext.pricelevel&&"undefined"!=typeof _IndexRequestData.impIDToSlotID[e.id][s.impid]){var g=_IndexRequestData.impIDToSlotID[e.id][s.impid];"undefined"==typeof index_slots&&(index_slots=[]),"undefined"==typeof _IndexRequestData.targetIDToBid&&(_IndexRequestData.targetIDToBid={});var r,_;"string"==typeof s.ext.dealid?(r=1===n?g+s.ext.pricelevel:g+"_"+s.ext.dealid,_=PRIVATE_MARKET+"_"):(r=g+s.ext.pricelevel,_=OPEN_MARKET+"_"),index_slots.push(_+r),void 0===_IndexRequestData.targetIDToBid[r]?_IndexRequestData.targetIDToBid[r]=[s.adm]:_IndexRequestData.targetIDToBid[r].push(s.adm);var l={};l.impressionID=s.impid,"undefined"!=typeof s.ext.dealid&&(l.dealID=s.ext.dealid),l.bid=s.price,l.slotID=g,l.priceLevel=s.ext.pricelevel,l.target=_+r,a.push(l)}}"function"==typeof t&&(0===a.length?t(e.id):t(e.id,a)),index_slots=cygnus_index_judge(index_slots)}}catch(u){}"undefined"==typeof index_slots&&(index_slots=[]),cygnus_index_set_targets()}function cygnus_index_set_targets(){function e(){var e=splitIndexSlots(),t=e[0],n=e[1];googletag.pubads().clearTargeting(OPEN_MARKET),googletag.pubads().clearTargeting(PRIVATE_MARKET),googletag.pubads().setTargeting(OPEN_MARKET,[]),googletag.pubads().setTargeting(PRIVATE_MARKET,[]),t.length>0&&googletag.pubads().setTargeting(OPEN_MARKET,t),n.length>0&&googletag.pubads().setTargeting(PRIVATE_MARKET,n)}"undefined"==typeof googletag?(window.googletag={},window.googletag.cmd=[],googletag.cmd.push(function(){e()})):"undefined"!=typeof googletag.pubads&&"undefined"!==googletag.pubads().setTargeting?e():googletag.cmd.push(function(){e()}),"function"==typeof window.cygnus_index_ready_state&&window.cygnus_index_ready_state()}function cygnus_log(e){}function index_render(e,t){clearTargeting(t),"undefined"==typeof index_demand&&(index_demand={});for(var n=t.split("_"),a=n[0],i=0;i<index_slots_render.length;i++)if("string"==typeof index_slots_render[i][OPEN_MARKET+"_"+t]){cygnus_log("unpack tier"+t),t=index_slots_render[i][OPEN_MARKET+"_"+t];var o=t.split("_");t=o[1]+"_"+o[2]+"_"+o[3],a=o[1]+"_"+o[2]}cygnus_log("index_render: "+t);try{var d=_IndexRequestData.targetIDToBid[t].pop();null!=d&&(e.write(d),cygnus_log("Logged demand for slot "+a),index_demand[a]=1,delete index_no_demand[a])}catch(s){}}function cygnus_copy(e){var t=new Object;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function getSlotInfo(e){for(var t=0;t<cygnus_index_args.slots.length;t++){var n=cygnus_index_args.slots[t];if(n.id==e)return n}}index_slot_to_size={},index_slots_render=[],index_slots_add=[];var cygnus_tid=4,OPEN_MARKET="IOM",PRIVATE_MARKET="IPM";
;cygnus_index_parse_res({"id": "348505199","ext": {"x3": [{"id":"105","val":1},{"id":"107","val":1},{"id":"39","val":64},{"id":"4","val":14},{"id":"47","val":2},{"id":"54","val":1},{"id":"71","val":1},{"id":"81","val":1},{"id":"85","val":20},{"id":"89","val":1},{"id":"90","val":1},{"id":"94","val":18},{"id":"97","val":1}]}});