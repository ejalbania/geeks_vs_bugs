'use strict';/* global YRG */if(typeof YRG!=='undefined'){YRG.use('rg-base',function(Y){Y.on('load',function(){var derefA=Y.all('a[href*="deref/"]'),swapUrl;derefA.on('hover',function(e){swapUrl(e.currentTarget);});derefA.on('click',function(e){var querystring=Y.rg.utils.url.getQueryString(e.currentTarget.getAttribute('data-dereferer'));var query=Y.QueryString.parse(querystring);var data=null;if(query.ergk){data={ergk:query.ergk};}else if(query.rgk){data={rgk:query.rgk};}if(data){Y.rg.ajax('go.Deref.trackClick.html',data,function(response){if(!response.success){Y.rg.notify(response.errors[0],'warning');}},this,null,'GET');}});swapUrl=function swapUrl(target){var url=target.getAttribute('href');if(url.indexOf("deref/")>-1){var sub=url.substring(url.indexOf('deref/')+6);// 6 = string length of deref/
var newBase=decodeURIComponent(sub.replace(/\?.*/,''));target.setAttribute('data-dereferer',url);target.set('href',newBase);}};});});}
